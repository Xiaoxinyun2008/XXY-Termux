# 📋 更新日志 / Changelog

## v5.0 (2025-11-22) - AI 深度优化版

### 🎉 重大新增功能

1. **完整备份与恢复系统**
   - ✅ 一键备份整个 Linux 容器到 tar.gz 文件
   - ✅ 从备份列表选择并快速恢复系统
   - ✅ 自动显示备份文件大小和日期
   - ✅ 安全确认机制防止误操作

2. **智能日志记录系统**
   - ✅ 所有操作自动记录到日志文件
   - ✅ 按日期组织日志（格式：xxy_YYYYMMDD.log）
   - ✅ 自动清理过期日志（默认 7 天）
   - ✅ 日志保存在 `~/.xxy/logs/` 目录

3. **配置文件支持**
   - ✅ 支持自定义配置文件 `~/.xxy/config.conf`
   - ✅ 可配置镜像源（清华/中科大/阿里云）
   - ✅ 可配置自动更新检查开关
   - ✅ 可配置日志保留天数
   - ✅ 可配置备份压缩选项

4. **自动版本检查与更新**
   - ✅ 启动时自动检查新版本
   - ✅ 一键升级到最新版本
   - ✅ 支持手动检查更新
   - ✅ 可在配置文件中关闭自动检查

5. **系统信息仪表板**
   - ✅ 显示当前版本号
   - ✅ 显示容器安装状态和大小
   - ✅ 显示备份数量和总大小
   - ✅ 显示日志文件信息
   - ✅ 显示配置文件路径

### 🔧 改进与优化

1. **代码结构优化**
   - ✅ 重构日志系统，统一日志记录接口
   - ✅ 改进错误处理机制
   - ✅ 添加更多的安全检查
   - ✅ 优化函数命名和代码注释

2. **用户体验提升**
   - ✅ 备份/恢复过程显示进度提示
   - ✅ 更详细的操作提示信息
   - ✅ 维护工具菜单增加更多选项
   - ✅ 主菜单显示动态版本号

3. **安全性增强**
   - ✅ 恢复系统前需要输入"YES"确认
   - ✅ 重要操作记录到日志
   - ✅ 自动创建必要目录
   - ✅ 错误时提供详细信息

### 📁 新增目录结构

```
~/.xxy/
├── config.conf          # 配置文件
├── logs/                # 日志目录
│   └── xxy_YYYYMMDD.log
└── backups/             # 备份目录
    └── xxy_debian_YYYYMMDD_HHMMSS.tar.gz
```

### 🎯 版本号变更

- 从 v4.0 升级到 v5.0
- 所有文档同步更新版本号

---

## v4.0 (之前版本)

### 主要功能
- ✅ Debian 生产力系统安装
- ✅ XFCE4 桌面环境配置
- ✅ VSCode 安装支持
- ✅ Shizuku 防闪退修复
- ✅ 中文环境完整配置
- ✅ Firefox ESR 浏览器
- ✅ Fcitx5 输入法支持
- ✅ Termux:X11 桌面显示

---

## 📝 升级说明

### 从 v4.0 升级到 v5.0

1. **自动升级**：重新运行一键安装命令即可
2. **数据安全**：升级不会影响已安装的系统
3. **新功能**：升级后可立即使用备份、日志等新功能
4. **配置文件**：首次运行时自动创建默认配置

### 建议操作

1. 升级前建议先使用 v5.0 的备份功能备份现有系统
2. 查看 `~/.xxy/config.conf` 自定义配置
3. 定期使用备份功能保护数据
4. 遇到问题可查看日志文件排查

---

## 🔮 未来计划

- [ ] 支持更多 Linux 发行版（Ubuntu、Arch 等）
- [ ] 自动备份定时任务
- [ ] 备份加密功能
- [ ] 图形化配置编辑器
- [ ] 插件系统支持
- [ ] 远程备份到云存储

---

**感谢使用 XXY！** 如有问题或建议，欢迎反馈。
