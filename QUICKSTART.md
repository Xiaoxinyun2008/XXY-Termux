# 🚀 XXY v5.0 快速开始指南

## 📥 安装

### 1. 一键安装
```bash
bash -c "$(curl -fsSL https://raw.githubusercontent.com/Xiaoxinyun2008/XXY-Termux/main/xxy)"
```

### 2. 启动程序
```bash
xxy
```

---

## 🎯 首次使用流程

### 第一步：安装 Debian 系统
```
主菜单 → 2. 安装/管理系统 → 1. 一键安装 Debian 生产力版
```
**注意：** 
- 需要稳定的网络连接
- 安装过程需要 10-30 分钟
- 会自动安装桌面环境、Firefox、中文支持等

### 第二步：启动桌面环境
```
主菜单 → 1. 🚀 启动桌面环境
```
**说明：**
- 会自动启动 Termux:X11 应用
- 需要授权 Termux:X11 权限
- 首次启动可能需要等待 10-20 秒

### 第三步（可选）：安装 VSCode
```
主菜单 → 2. 安装/管理系统 → 2. 安装 VSCode
```

---

## 💾 新功能快速指南

### 🔸 备份系统

**何时使用：**
- 系统配置完成后
- 安装重要软件前
- 定期数据保护

**操作步骤：**
```
主菜单 → 3. 维护/防闪退修复 → 3. 备份系统
```

**效果：**
- 自动打包整个系统
- 保存到 `~/.xxy/backups/`
- 文件名格式：`xxy_debian_20251122_103045.tar.gz`

---

### 🔸 恢复系统

**何时使用：**
- 系统出现问题
- 想回到之前状态
- 测试失败需要回滚

**操作步骤：**
```
主菜单 → 3. 维护/防闪退修复 → 4. 恢复系统
```

**注意：**
- 会列出所有可用备份
- 选择编号即可恢复
- 需要输入 `YES` 确认（因为会覆盖现有系统）

---

### 🔸 查看系统信息

**查看内容：**
- 当前版本号
- 容器安装状态
- 备份数量和大小
- 日志文件信息

**操作步骤：**
```
主菜单 → 3. 维护/防闪退修复 → 6. 查看系统信息
```

---

### 🔸 配置文件自定义

**配置文件位置：**
```bash
~/.xxy/config.conf
```

**可配置项：**
```bash
# 编辑配置文件
nano ~/.xxy/config.conf

# 可修改的选项：
MIRROR_SOURCE="tuna"         # 镜像源：tuna/ustc/aliyun
AUTO_UPDATE_CHECK="true"     # 自动更新检查：true/false
LOG_RETENTION_DAYS="7"       # 日志保留天数：数字
BACKUP_COMPRESSION="true"    # 备份压缩：true/false
```

**修改后：**
- 重启 XXY 程序即可生效

---

### 🔸 查看日志

**日志文件位置：**
```bash
~/.xxy/logs/xxy_20251122.log
```

**查看日志：**
```bash
# 查看今天的日志
cat ~/.xxy/logs/xxy_$(date +%Y%m%d).log

# 实时查看日志
tail -f ~/.xxy/logs/xxy_$(date +%Y%m%d).log

# 搜索错误
grep ERROR ~/.xxy/logs/*.log
```

---

## 🛠️ 常见操作

### 防闪退修复（Shizuku）
```
主菜单 → 3. 维护/防闪退修复 → 1. Shizuku 防闪退修复
```
**说明：**
- 防止 Termux 后台被杀死
- 需要先安装 Shizuku APP
- 首次使用需要授权

### 清理下载缓存
```
主菜单 → 3. 维护/防闪退修复 → 2. 清理下载缓存
```
**用途：**
- 安装失败后清理
- 重新下载系统前使用

### 清理旧日志
```
主菜单 → 3. 维护/防闪退修复 → 5. 清理旧日志
```
**说明：**
- 自动清理 7 天前的日志
- 程序启动时也会自动清理

---

## 📱 使用场景示例

### 场景 1：日常开发使用
```
1. xxy                          # 启动程序
2. 选择 1 (启动桌面环境)        # 进入桌面
3. 使用 Firefox/VSCode 开发
4. 完成后关闭 Termux:X11
```

### 场景 2：测试新软件
```
1. xxy → 3 → 3                 # 先备份系统
2. 进入桌面安装测试软件
3. 如果出问题：xxy → 3 → 4    # 从备份恢复
```

### 场景 3：系统迁移
```
1. 旧设备：xxy → 3 → 3         # 备份系统
2. 复制备份文件到新设备
   cp ~/.xxy/backups/*.tar.gz /sdcard/
3. 新设备：安装 XXY
4. 复制备份文件到新设备
   cp /sdcard/*.tar.gz ~/.xxy/backups/
5. xxy → 3 → 4                 # 恢复系统
```

### 场景 4：排查问题
```
1. 遇到问题时
2. xxy → 3 → 6                 # 查看系统信息
3. cat ~/.xxy/logs/*.log       # 查看日志
4. 根据日志信息解决问题
```

---

## ⚡ 快捷技巧

### 1. 快速启动桌面
```bash
# 创建别名
echo 'alias xd="xxy"' >> ~/.bashrc
source ~/.bashrc

# 然后只需输入
xd
# 进入菜单后按 1 即可
```

### 2. 查看最新日志
```bash
# 创建查看日志的函数
echo 'xxlog() { tail -f ~/.xxy/logs/xxy_$(date +%Y%m%d).log; }' >> ~/.bashrc
source ~/.bashrc

# 使用
xxlog
```

### 3. 快速备份
```bash
# 如果经常需要备份，可以记住路径
alias xxbackup="cd ~/.xxy/backups && ls -lht"

# 查看所有备份
xxbackup
```

---

## ⚠️ 注意事项

### 备份相关
- ✅ 备份前确保有足够存储空间（至少系统大小的 2 倍）
- ✅ 重要备份建议复制到外部存储
- ⚠️ 恢复操作会完全覆盖现有系统，请谨慎

### 日志相关
- ✅ 日志会自动清理，无需担心占用空间
- ✅ 遇到问题时，日志是最好的排查工具
- ✅ 可以在配置文件中调整日志保留天数

### 更新相关
- ✅ 程序会自动检查更新（可配置关闭）
- ✅ 更新不会影响已安装的系统
- ✅ 更新只会覆盖 XXY 脚本本身

---

## 🆘 故障排除

### 问题 1：备份失败
**可能原因：** 存储空间不足
**解决方法：**
```bash
# 检查可用空间
df -h $HOME
# 清理不需要的文件
```

### 问题 2：日志文件太多
**解决方法：**
```bash
# 手动清理
xxy → 3 → 5

# 或者调整配置
nano ~/.xxy/config.conf
# 修改 LOG_RETENTION_DAYS="3"  # 改为 3 天
```

### 问题 3：恢复后无法启动
**可能原因：** 备份文件损坏
**解决方法：**
```bash
# 尝试其他备份文件
xxy → 3 → 4
# 选择另一个备份

# 如果都失败，重新安装
xxy → 2 → 1
```

---

## 📞 获取帮助

### 查看文档
- [README_CN.md](README_CN.md) - 完整中文文档
- [README.md](README.md) - 英文文档
- [CHANGELOG.md](CHANGELOG.md) - 更新日志
- [IMPROVEMENTS.md](IMPROVEMENTS.md) - 改进详情

### 查看版本
```bash
# 在程序内
xxy → 3 → 6  # 查看系统信息
```

### 反馈问题
1. 查看日志文件
2. 记录错误信息
3. 在 [GitHub Issue](https://github.com/Xiaoxinyun2008/XXY-Termux/issues) 提交反馈

---

## 🎯 快速参考卡

| 功能 | 菜单路径 | 说明 |
|-----|---------|------|
| 启动桌面 | `1` | 日常使用 |
| 安装系统 | `2 → 1` | 首次使用 |
| 安装 VSCode | `2 → 1` | 可选 |
| 备份系统 | `3 → 3` | 重要操作前 |
| 恢复系统 | `3 → 4` | 出问题时 |
| 系统信息 | `3 → 6` | 查看状态 |
| Shizuku 修复 | `3 → 1` | 防闪退 |
| 清理缓存 | `3 → 2` | 安装失败时 |

---

**祝您使用愉快！** 🎉

如有问题，请查看日志文件或联系支持。
